\chapter{Исследовательский раздел}
В исследовательском разделе проведено исследование разработанного программного обеспечения.

Технические характеристики устройства, на котором было
проведено исследование~\cite{huawei}
\begin{itemize}
	\item Intel$\textsuperscript{\textregistered}$  Core$\textsuperscript{\texttrademark}$ Ultra 5 Processor 4.50 ГГц 14 логических ядер~\cite{intel_technical_specs}; 
	\item Оперативная память: 16 Гб;
\end{itemize}



\section{Цель исследования}

Ключевым для алгоритма визуализации облаков является количество точек, которые берутся на трассирующем луче от наблюдателя для вычисления плотности (рисунок ~\ref{fig:cloud-sampling}). Чем больше точек используется, тем лучше визуальный результат, но тем дольше происходит отрисовка облака.

Цель исследования — найти оптимальное количество трассирующих лучей. Для этого проведено сравнение алгоритма визуализации облаков с распараллеливанием цикла обхода пикселей и без него. Распараллеливание было выполнено с помощью библиотеки \textit{rayon}~\cite{rust_rayon} на всех ядрах устройства.

Временные параметры были сопоставлены с оценкой качества изображения, полученного при визуализации облаков, через опрос респондентов.

\section{Исследование}

Исследование проводилось на ноутбуке, подключённом к сети электропитания, с минимальной нагрузкой (только необходимые программы: терминал и программа для запуска исследования). Использовалась компиляция без оптимизаций.

Для каждого шага проводилось 300 прогонов. Рассчитывалось общее время, из которого вычислялось среднее значение. Сцена была отрисована с тем же ракурсом, что и на рисунке~\ref{fig:cloud-impl}, но без ландшафта и неба. Этот ракурс использовался и в оцениваемых изображениях опроса.

На рисунке~\ref{fig:plot} представлен график зависимости времени от количества точек на трассируемом луче. Зависимость в табличной форме показана в таблице~\ref{tab:steps_time}.

\vspace{-5cm}
\begin{figure}[ht!]
	\centering
	\includesvg[width=1.0\textwidth]{plot.svg}   
	\caption{График зависимости времени выполнения от количества точек на трассируемом луче.}
	\label{fig:plot}
\end{figure}

\begin{table}
\caption{Зависимость времени выполнения от количества точек на трассируемом луче}
\begin{tabular}{|r|r|r|}
	\hline
	\textbf{Количество точек} & \textbf{Параллельный цикл (мс)} & \textbf{Простой цикл (мс)} \\ \hline
	0              & 10            & 79            \\ \hline
	20             & 29            & 234           \\ \hline
	40             & 48            & 371            \\ \hline
	60             & 69            & 493           \\ \hline
	80             & 92            & 628           \\ \hline
	100            & 114           & 752           \\ \hline
	120            & 137           & 887           \\ \hline
	140            & 159            & 1013          \\ \hline
	160            & 180           & 1149          \\ \hline
	180            & 202           & 1268          \\ \hline
	200            & 224             & 1394          \\ \hline
	220            & 244           & 1522          \\ \hline
	240            & 265           & 1662          \\ \hline
	260            & 294           & 1783          \\ \hline
	280            & 316            & 1916          \\ \hline
	300            & 336           & 2057          \\ \hline
\end{tabular}
\label{tab:steps_time}
\end{table}
\clearpage

Респондентам было преложено оценить реалистичность облачного пейзажа 10‑балльной шкале. (1 - нереалистичное, 10 - реалистичное). В опросе приняли участие 20 человек. Сбор данных происходил анонимно. Результат опроса в таблице~\ref{tab:rate}
\begin{table}[h!]
	\centering
	\caption{Средня оценка изображения при глубине трассировки}
	\begin{tabular}{|r|r|}
		\hline
		\textbf{Количество точек} & \textbf{Оценка реалистичности} \\
		\hline
		20 & 3.7 \\
		\hline
		40 & 5.1 \\
		\hline
		60 & 6.2 \\
		\hline
		80 & 6.95 \\
		\hline
		100 & 7.4 \\
		\hline
		120 & 7.4 \\
		\hline
		140 & 7.4 \\
		\hline
		160 & 7.35 \\
		\hline
		180 & 7.55 \\
		\hline
		200 & 7.55 \\
		\hline
		220 & 7.6875 \\
		\hline
		240 & 7.8125 \\
		\hline
		260 & 7.6875 \\
		\hline
		280 & 7.6875 \\
		\hline
		300 & 7.6875 \\
		\hline
	\end{tabular}
	\label{tab:rate}
\end{table}

\section*{Вывод}
В данном разделе была описана цель исследования, технические характеристики устройства, на котором проведено исследование, а также приведены результаты исследования.

Было проведено исследование зависимости времени выполнения реализации алгоритма визуализации облака с использованием распараллеливания цикла и без.

Респонденты оценили вариант с количеством точек на трассируемом луче равным 240 максимальной оценкой 7.8/10. При таком значении время выполнения алгоритма визуализации облака занимает 265 мс, что обеспечивает получение 4 кадров в секунду. Это свидетельствует тому, что алгоритм нуждается в оптимизациях для достижения результата в 30 кадров в секунду.